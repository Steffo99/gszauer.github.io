<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Math test</title>
		
		<script src="quaternion.js"></script>
		<script src="vector3.js"></script>
		<script src="transform_struct.js"></script>
		<script src="node.js"></script>

		<script type="text/javascript">

function cmp(x, y) {
	return Math.abs(x - y) < 0.0000000000001
}
function main() {
	var assert = function (message) {
		V3_AssertHelper(false, message);
	}

	V3_AssertHelper(true, "V3 Can't see me");
	//V3_AssertHelper(false, "V3 assert");

	V3_AssertIsFloat(0.0,       "1 Is float");
	V3_AssertIsFloat(7,         "2 Is float");
	//V3_AssertIsFloat('x',       "3 Not float");
	//V3_AssertIsFloat(null,      "4 Not float");
	//V3_AssertIsFloat(y,         "5 Not float");
	//V3_AssertIsFloat([2, 3, 4], "6 Not float");

	V3_AssertIsBool(true,      "0 Is bool")
	V3_AssertIsBool(false,     "1 Is bool")
	V3_AssertIsBool(6 == 3,    "2 Is bool")
	//V3_AssertIsBool(null,      "3 Not bool")
	//V3_AssertIsBool(x,         "4 Not bool")
	//V3_AssertIsBool([0, 1, 2], "5 Not bool")
	//V3_AssertIsBool("7",       "6 Not bool")
	//V3_AssertIsBool("7 == 8",  "7 Not bool")
	//V3_AssertIsBool("true",    "8 Not bool")

	V3_AssertIsVector3([0,0,0], "0 Is vec3")
	V3_AssertIsVector3([1,2,3], "1 Is vec3")
	//V3_AssertIsVector3([0,0],   "2 Not vec3")
	//V3_AssertIsVector3([0],     "3 Not vec3")
	//V3_AssertIsVector3([],      "4 Not vec3")
	//V3_AssertIsVector3(null,    "5 Not vec3")
	//V3_AssertIsVector3(true,    "6 Not vec3")
	//V3_AssertIsVector3(0,       "7 Not vec3")

	V3_AssertIsNormal3([1,0,0],     "0 IS normal")
	V3_AssertIsNormal3([0,1,0],     "1 IS normal")
	V3_AssertIsNormal3([0,0,1],     "2 IS normal")
	//V3_AssertIsNormal3([0.5,0,0.5], "3 IS normal")
	//V3_AssertIsNormal3([0,0,0],     "4 Is not normal")
	//V3_AssertIsNormal3([0.5,0,0.6], "5 Is not normal")
	//V3_AssertIsNormal3([0, 5, 0],   "6 Is not normal")

	if (!V3_Equals([0,0,0], [0,0,0])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals([1,1,1], [1,1,1])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals([0.5, 0.6, 0.7], [0.5, 0.6, 0.7])){
		assert("Expected to be equal");
	}
	if (V3_Equals([0,0,0], [1,1,1])){
		assert("Expected to NOT be equal");
	}
	if (V3_Equals([1,1,1.1], [1,1,1])){
		assert("Expected to NOT be equal");
	}
	if (V3_Equals([1.1,1,1], [1,1,1.1])){
		assert("Expected to NOT be equal");
	}
	if (V3_Equals([0.5, 0.6, 0.7], [-0.5, -0.6, -0.7])){
		assert("Expected to NOT be equal");
	}


	if (!V3_Equals(V3_Zero(), [0,0,0])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_One(), [1,1,1])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Forward(), [0,0,1])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Up(), [0,1,0])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Right(), [1,0,0])) {
		assert("Expected to be equal");
	}

	if (V3_Equals(V3_Zero(), [0,0,1])) {
		assert("Expected to NOT be equal");
	}

	if (V3_Equals(V3_One(), [1,-1,-1])) {
		assert("Expected to NOT be equal");
	}
	/*if (V3_Equals(V3_Forward(), [0,0,6,7])) {
		assert("Expected to NOT be equal");
	}*/
	if (V3_Equals(V3_Up(), [0,0,1])) {
		assert("Expected to NOT be equal");
	}
	if (V3_Equals(V3_Right(), [-1,-0,-0])) {
		assert("Expected to NOT be equal");
	}

	if (!V3_Equals(V3_Add(V3_Zero(), V3_One()), V3_One())) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Add([2, 3, 4], V3_One()), [3, 4, 5]))  {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Add([0, 1, 0], [1, 0, 1]), V3_One()))  {
		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Scale(V3_One(), 0.0), V3_Zero())) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Scale(V3_One(), 5.0), [5,5,5])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Scale(V3_One(), -5.0), [-5,-5,-5])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Scale([2, -2, 2], -5.0), [-10, 10, -10])) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Mul([0,0,0], [5,5,5]), V3_Zero())) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Mul([0,1,2], [3,4,5]), [0,4,10])) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Mul([0,1,2], [-3,-4,-5]), [0,-4,-10])) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Sub(V3_One(), V3_One()), V3_Zero())) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Sub(V3_Zero(), V3_One()), V3_Scale(V3_One(), -1))) {
		assert("Expected to be equal");
	}
	if (!V3_Equals(V3_Sub([4,5, 6], [1, 2, 3]), [3, 3, 3])) {
		assert("Expected to be equal");
	}

	var dot = V3_Dot(V3_Normalized(V3_One()), V3_Normalized(V3_One()))
	if (Math.abs(1.0 - dot) > 0.0000000000001) {
		assert("Expected to be equal\n" + dot.toFixed(15));
	}
	dot = V3_Dot(V3_Normalized(V3_One()), V3_Normalized(V3_Scale(V3_One(), -1)))
	if (Math.abs(-1.0 - dot) > 0.0000000000001) {
		assert("Expected to be equal\n" + dot.toFixed(15));
	}
	dot = V3_Dot(V3_Normalized(V3_One()), V3_Zero())
	if (Math.abs(0 - dot) > 0.0000000000001) {
		assert("Expected to be equal\n" + dot.toFixed(15));
	}

	if (!cmp(V3_MagnitudeSq(V3_Right()), 1)) {
		assert("Expected to be equal");
	}
	if (!cmp(V3_MagnitudeSq(V3_Zero()), 0)) {
		assert("Expected to be equal");
	}
	if (!cmp(V3_MagnitudeSq(V3_One()), 3 )) {
		assert("Expected to be equal\n" + V3_MagnitudeSq(V3_One()).toFixed(5));
	}

	if (!cmp(V3_Magnitude(V3_Right()), 1)) {
		assert("Expected to be equal");
	}
	if (!cmp(V3_Magnitude(V3_Zero()), 0)) {
		assert("Expected to be equal");
	}
	if (!cmp(V3_Magnitude(V3_One()), Math.sqrt(3) )) {
		assert("Expected to be equal\n" + V3_MagnitudeSq(V3_One()).toFixed(5));
	}

	if (!V3_Equals(V3_Normalized([7, 0, 0]), V3_Right())) {
		assert("Expected to be equal");
	}
	//V3_Normalized([0,0,0])

	if (!cmp(V3_GetAngleDegrees(V3_Forward(), V3_Right()), 90)) {
		const angle = V3_GetAngleDegrees(V3_Forward(), V3_Right());
		assert("Expected to be equal " + angle.toFixed(5));
	}

	if (!cmp(V3_GetAngleDegrees(V3_Scale(V3_Forward(), -7.5), V3_Right()), 90)) {
		const angle = V3_GetAngleDegrees(V3_Forward(), V3_Right());
		assert("Expected to be equal " + angle.toFixed(5));
	}

	if (!cmp(V3_GetAngleRadians(V3_Forward(), V3_Right()), 90 * V3_DegToRad)) {
		const angle = V3_GetAngleDegrees(V3_Forward(), V3_Right());
		assert("Expected to be equal " + angle.toFixed(5));
	}

	if (!cmp(V3_GetAngleRadians(V3_Scale(V3_Forward(), -7.5), V3_Right()), 90 * V3_DegToRad)) {
		const angle = V3_GetAngleDegrees(V3_Forward(), V3_Right());
		assert("Expected to be equal " + angle.toFixed(5));
	}

	if (!V3_Equals(
			V3_Normalized(
				V3_Project(
					V3_Add(
						V3_Add(V3_Right(), V3_Up()), 
						V3_Forward()
					), 
					V3_Forward()
				)
			), 
			V3_Forward()
		)
	) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(
			V3_Normalized(
				V3_Reject(
					V3_Add(
						V3_Add(V3_Right(), V3_Up()), 
						V3_Forward()
					), 
					V3_Forward()
				)
			), 
			V3_Normalized(V3_Add(V3_Right(), V3_Up()))
		)
	) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(
		V3_Reflect(V3_Normalized(V3_Add(V3_Right(), V3_Up())), V3_Right()),
		V3_Normalized(V3_Add(V3_Scale(V3_Right(), -1), V3_Up()))
	)) {
		const reflecting = V3_Normalized(V3_Add(V3_Right(), V3_Up()));
		const around = V3_Right();
		const reflection = V3_Reflect(V3_Normalized(V3_Add(V3_Right(), V3_Up())), V3_Right())
		const expected = V3_Normalized(V3_Add(V3_Scale(V3_Right(), -1), V3_Up()))

		console.log("Reflecting:  " + V3_To_Str(reflecting))
		console.log("around:  " + V3_To_Str(around))
		console.log("Reflection:  " + V3_To_Str(reflection))
		console.log("Expectation: " + V3_To_Str(expected))

		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Cross(V3_Forward(), V3_Right()), V3_Up())) {
		assert("Expected to be equal");
	}

	V3_To_V2(V3_Right());
	V3_To_V4(V3_One());

	if (!V3_Equals(V3_Lerp(V3_Zero(), V3_One(), 0.5), V3_Scale(V3_One(), 0.5))) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Slerp(V3_Up(), V3_Right(), 0.5), V3_Normalized(V3_Lerp(V3_Up(), V3_Right(), 0.5)))) {
		assert("Expected to be equal");
	}

	if (!V3_Equals(V3_Nlerp(V3_Up(), V3_Right(), 0.5), V3_Normalized(V3_Lerp(V3_Up(), V3_Right(), 0.5)))) {
		assert("Expected to be equal");
	}

	//console.log(V3_To_Str(V3_Up(), 0));

	if (!V3_Equals(
		V3_RotateAround(V3_Scale(V3_Up(), 2), V3_Right(), 180),
		V3_Scale(V3_Up(), -2))) {
		assert("Expected to be equal");
	}



	assert = function (message) {
		Q_AssertHelper(false, message);
	}

	Q_AssertHelper(true, "test")
	//Q_AssertHelper(false, "Test")

	Q_AssertIsQuaternion([0,0,0,1], "Is a quat");
	//Q_AssertIsQuaternion([0,0,0], "1 Not a quat");
	//Q_AssertIsQuaternion([0,0], "2 Not a quat");
	//Q_AssertIsQuaternion(null, "3 Not a quat");
	//Q_AssertIsQuaternion(false, "4 Not a quat");
	//Q_AssertIsQuaternion("string", "5 Not a quat");
	//Q_AssertIsQuaternion(5, "6 Not a quat");


	Q_AssertIsFloat(0.0,       "1 Is float");
	Q_AssertIsFloat(7,         "2 Is float");
	//Q_AssertIsFloat('x',       "3 Not float");
	//Q_AssertIsFloat(null,      "4 Not float");
	//Q_AssertIsFloat(y,         "5 Not float");
	//Q_AssertIsFloat([2, 3, 4], "6 Not float");

	Q_AssertIsBool(true,      "0 Is bool")
	Q_AssertIsBool(false,     "1 Is bool")
	Q_AssertIsBool(6 == 3,    "2 Is bool")
	//Q_AssertIsBool(null,      "3 Not bool")
	//Q_AssertIsBool(x,         "4 Not bool")
	//Q_AssertIsBool([0, 1, 2], "5 Not bool")
	//Q_AssertIsBool("7",       "6 Not bool")
	//Q_AssertIsBool("7 == 8",  "7 Not bool")
	//Q_AssertIsBool("true",    "8 Not bool")

	Q_AssertIsVec3([0,0,0], "0 Is vec3")
	Q_AssertIsVec3([1,2,3], "1 Is vec3")
	//Q_AssertIsVec3([0,0],   "2 Not vec3")
	//Q_AssertIsVec3([0],     "3 Not vec3")
	//Q_AssertIsVec3([],      "4 Not vec3")
	//Q_AssertIsVec3(null,    "5 Not vec3")
	//Q_AssertIsVec3(true,    "6 Not vec3")
	//Q_AssertIsVec3(0,       "7 Not vec3")

	Q_AssertIsNormalized([0,0,0,1], "0 normalized");
	//Q_AssertIsNormalized([0,0.5,0,1]);
	Q_AssertIsNormalized(Q_Normalized([0,0.5,0,1]), "2  normalized");

	if (!Q_IsAbout1(1)) {
		assert("expected to be 1");
	}
	if (Q_IsAbout1(0.9)) {
		assert("did not expect 1");
	}
	if (Q_IsAbout1(0.99)) {
		assert("did not expect 1");
	}

	Q_AssertIsNormalized(Q_Identity(), "identity not normal");
	Q_AssertIsNormalized(Q_Pure(V3_Normalized([1,1,1])), "identity not normal");
	Q_AssertIsNormalized(Q_Copy(Q_Identity()), "identity not normal");
	Q_AssertIsNormalized(Q_Copy(Q_Pure(V3_Normalized([1,1,1]))), "identity not normal");

	var angleAxisQuat1 = Q_AngleAxis(90, [0,0,1]);
	var angleAxisQuat2 = Q_AngleAxis(90, [0,0,10]);

	if (!cmp(Q_GetAngleDegrees(angleAxisQuat1), 90)) {
		assert("bad angle");
	}
	if (!cmp(Q_GetAngleRadians(angleAxisQuat1), 90 * Q_DegToRad)) {
		assert("bad angle");
	}
	if (!cmp(Q_GetAngleDegrees(angleAxisQuat2), 90)) {
		assert("bad angle");
	}
	if (!cmp(Q_GetAngleRadians(angleAxisQuat2), 90 * Q_DegToRad)) {
		assert("bad angle");
	}

	if (!Q_Equals(angleAxisQuat1, angleAxisQuat2)) {
		console.log("angleAxisQuat1: " + Q_To_Str(angleAxisQuat1));
		console.log(" -> " + V3_To_Str(V3_Normalized( [2, 2, 10])))
		console.log("angleAxisQuat2: " + Q_To_Str(angleAxisQuat2));
		console.log(" -> " + V3_To_Str(V3_Normalized( [1, 1, 5])))
		assert("Expected these to be equal");
	}

	if (!V3_Equals(Q_GetAxis(angleAxisQuat1), Q_GetAxis(angleAxisQuat2))) {
		assert("expected to be equal");
	}


	var fromTo = Q_FromTo([0,0,7], [0,5,0])
	angleAxisQuat1 = Q_AngleAxis(-90, [1,0,0])
	if (!Q_Equals(fromTo, angleAxisQuat1)) {
		console.log(Q_To_Str(fromTo))
		console.log(Q_To_Str(angleAxisQuat1));
		assert("Expected these to be the same");
	}

	const forward = V3_Forward();
	var rotated = V3_Mul_Q(forward, angleAxisQuat1);

	if (!V3_Equals(rotated, [0,1,0])) {
		console.log("rotated: " + V3_To_Str(rotated));
		assert("was expecting these to be equal");
	}

	var rotationAxis = V3_Normalized([10,20,30])
	var vec_rotated = V3_RotateAround(forward, rotationAxis, 31);
	rotated = V3_Mul_Q(forward, Q_AngleAxis(31, rotationAxis));

	if (!V3_Equals(rotated, vec_rotated)) {
		assert("expecting these to be equal");
	}

	if (Q_Equals(Q_AngleAxis(90, [1,0,0]), Q_AngleAxis(-90, [1,0,0]))) {
		console.log(Q_To_Str(Q_AngleAxis(90, [1,0,0])));
		console.log(Q_To_Str(Q_AngleAxis(-90, [1,0,0])));
		assert("Was not expecting these to be equal");
	}
	if (Q_Same(Q_AngleAxis(90, [1,0,0]), Q_AngleAxis(-90, [1,0,0]))) {
		assert("was not expecting these to be the same");
	}

	angleAxisQuat1 = Q_AngleAxis(30, V3_Normalized([-10, 5, 6]));
	angleAxisQuat2 = Q_Copy(angleAxisQuat1);

	if (!Q_Equals(angleAxisQuat1, angleAxisQuat2)) {
		assert("was expecting these to be the same");
	}
	if (!Q_Same(angleAxisQuat1, angleAxisQuat2)) {
		assert("was expetingt hese to be the same");
	}
	
	angleAxisQuat2[0] = -angleAxisQuat2[0];
	angleAxisQuat2[1] = -angleAxisQuat2[1];
	angleAxisQuat2[2] = -angleAxisQuat2[2];
	angleAxisQuat2[3] = -angleAxisQuat2[3];

	if (Q_Equals(angleAxisQuat1, angleAxisQuat2)) {
		assert("was expecting these to NOT be the same");
	}
	if (!Q_Same(angleAxisQuat1, angleAxisQuat2)) {
		assert("was expecting these to be the same");
	}

	var v1 = V3_Mul_Q(forward, angleAxisQuat1)
	var v2 = V3_Mul_Q(forward, angleAxisQuat2)
	if (!V3_Equals(v1, v2)) {
		console.log(": " + Q_To_Str(angleAxisQuat1));
		console.log("q2: " + Q_To_Str(angleAxisQuat2));
		console.log("v1: " + V3_To_Str(v1));
		console.log("v2: " + V3_To_Str(v2));
		assert("was expecting these to be equal");
	}

	if (!Q_Equals(Q_Scale(Q_AngleAxis(22, [0,1,1]), -1), Q_Negate(Q_AngleAxis(22, [0,1,1])))) {
		assert("Expected to be equal");
	}

	var q = Q_Scale(Q_Identity(), -1);
	var nq = Q_Negate(Q_Identity());

	if (q[0] != nq[0] || q[1] != nq[1] ||
		q[2] != nq[2] || q[3] != nq[3]) {
		console.log(Q_To_Str(q));
		console.log(Q_To_Str(nq));
		console.log("expecting to be equals");
	}

	nq = Q_Scale(q, -1);

	if (q[0] == nq[0] && q[1] == nq[1] &&
		q[2] == nq[2] && q[3] == nq[3]) {
		console.log("expecting to not be equals");
	}

	q = Q_AngleAxis(22, [1, 3, 55]);
	if (Q_MagnitudeSq(q) != 1) {
		assert("was expecting 1");
	}
	if (Q_Magnitude(q) != 1) {
		assert("was expecting 1");
	}
	q = Q_Scale(q, 2);
	if (Q_MagnitudeSq(q) != 2 * 2) {
		assert("was expecting 2*2");
	}
	if (Q_Magnitude(q) != 2) {
		assert("was expecting 2");
	}

	q = Q_Normalized(q)
	if (Q_MagnitudeSq(q) != 1) {
		assert("was expecting 1");
	}
	if (Q_Magnitude(q) != 1) {
		assert("was expecting 1");
	}

	q = [12, 3, 45, 4];
	q = Q_Normalized(q);
	if (Q_MagnitudeSq(q) != 1) {
		console.log("magsq: " + Q_MagnitudeSq(q));
		assert("was expecting 1");
	}
	if (Q_Magnitude(q) != 1) {
		assert("was expecting 1");
	}

	var left = Q_AngleAxis(90, [0,1,0]);
	var up = Q_AngleAxis(-90, [1, 0, 0]);

	var up_left_result_left = Q_Mul(left, up);
	var left_up_result_up = Q_Mul(up, left)

	var result_left = V3_Mul_Q([0,0,1], up_left_result_left);
	var result_up = V3_Mul_Q([0,0,1],left_up_result_up);

	if (!V3_Equals(result_left, V3_Right())) {
		assert("expecting these to be equal");
	}

	if (!V3_Equals(result_up, V3_Up())) {
		assert ("expecting these to be equa")
	}

	result_left = Q_Rotate(up_left_result_left, [0,0,1]);
	result_up = Q_Rotate(left_up_result_up, [0,0,1]);

	if (!V3_Equals(result_left, V3_Right())) {
		assert("expecting these to be equal");
	}

	if (!V3_Equals(result_up, V3_Up())) {
		assert ("expecting these to be equa")
	}

	var i_up = Q_Inverse(up);
	var i_left = Q_Inverse(left);

	if (!Q_Equals(Q_Mul(up, i_up), Q_Identity())) {
		assert ("expecting these to be equa")
	}
	if (!Q_Equals(Q_Mul(i_up, up), Q_Identity())) {
		assert ("expecting these to be equa")
	}
	if (!Q_Equals(Q_Mul([7, 19, 32, 4], Q_Inverse([7, 19, 32, 4])), Q_Identity())) {
		assert ("expecting these to be equa")
	}

	i_up = Q_Conjugate(up);
	i_left = Q_Conjugate(left);

	if (!Q_Equals(Q_Mul(up, i_up), Q_Identity())) {
		assert ("expecting these to be equa")
	}
	if (!Q_Equals(Q_Mul(i_up, up), Q_Identity())) {
		assert ("expecting these to be equa")
	}
	if (Q_Equals(Q_Mul([7, 19, 32, 4], Q_Conjugate([7, 19, 32, 4])), Q_Identity())) {
		assert ("expecting these to NOT be equa")
	}

	if (!Q_Equals(Q_Identity(), Q_LookAtDirection([0,0,1], [0,1,0]))) {
		assert ("expecting these to be equa")
	}

	if (!Q_Equals(Q_AngleAxis(90, [0,1,0]), Q_LookAtDirection([1,0,0], [0,1,0]))) {
		console.log(Q_To_Str(Q_LookAtDirection([1,0,0], [0,1,0])));
		assert ("expecting these to be equa")
	}

	if (!Q_Equals(Q_AngleAxis(-90, [1,0,0]), Q_LookAtDirection([0,1,0], [0,0,1]))) {
		console.log(Q_To_Str(Q_LookAtDirection(               [0,1,0], [0,0,1])));
		console.log(Q_Magnitude(Q_LookAtDirection(            [0,1,0], [0,0,1])).toFixed(5));
		console.log(Q_To_Str(Q_AngleAxis(90, [1,0,0])));
		assert ("expecting these to be equa")
	}

	var looking = Q_LookAtPoint([0,0,0], [0,0,1], [0,1,0])
	if (!Q_Equals(looking, Q_Identity())) {
		assert ("expecting these to be equa")
	}

	if (!Q_Equals(Q_Add([1,1,2,2], [3,3,4,4]), [4,4,6,6])) {
		assert ("expecting these to be equa")
	}

	if (!Q_Equals(Q_Sub([1,2,3,4], [4,3,2,1]), [-3, -1, 1, 3])) {
		assert ("expecting these to be equa")
	}

	if (Q_Dot(Q_AngleAxis(90, [0, 3, 4]), Q_AngleAxis(90, [0, 3, 4])) != 1) {
		assert("expecting 1");
	}
	if (Q_Dot(Q_AngleAxis(90, [0, 3, 4]), Q_Negate(Q_AngleAxis(90, [0, 3, 4]))) != -1) {
		assert("expecting -1");
	}

	if (!cmp(Q_Dot(Q_Identity(),             Q_AngleAxis(180, [1,0,0])), 0)) {
		console.log(Q_Dot(Q_Identity(), Q_AngleAxis(180, [1,0,0])).toFixed(15));
		assert("Expected 0");
	}

	var q1 = Q_AngleAxis(42, [10, 20, 13]);
	var q2 = Q_AngleAxis(94, [10, 20, 13]);

	if (!Q_Equals(Q_Nlerp(q1, q2, 0.5), Q_Slerp(q1, q2, 0.5))) {
		console.log("q1: " + Q_To_Str(q1));
		console.log("q2: " + Q_To_Str(q2));
		console.log(Q_To_Str(Q_Nlerp(q1, q2, 0.5)))
		console.log(Q_To_Str(Q_Slerp(q1, q2, 0.5)))
		assert("Expecting these to be the same");
	}

	if (!Q_Equals(Q_Nlerp(q1, q2, 0), Q_Slerp(q1, q2, 0))) {
		assert("Expecting these to be the same");
	}

	if (!Q_Equals(Q_Nlerp(q1, q2, 1), Q_Slerp(q1, q2, 1))) {
		assert("Expecting these to be the same");
	}

	if (Q_Equals(Q_Nlerp(q1, q2, 0.75), Q_Slerp(q1, q2, 0.75))) {
		assert("Expecting these to nOT the same");
	}

	if (Q_Equals(Q_Nlerp(q1, q2, 0.15), Q_Slerp(q1, q2, 0.15))) {
		assert("Expecting these to nOT the same");
	}


	Q_Mix2(q1, 2, q2, 3, true)
	Q_Mix3(q1, 0.33, q2, 0.33, q1, 2, true) 
	Q_Mix4(q1, 0.25, q2, 0.25, q1, 3, q2, 0.25, true)

	q1 = Q_Pow(Q_AngleAxis(90, [1, 0, 0]), 2)
	if (Q_GetAngleDegrees(q1) != 180) {
		assert("was expecting 180");
	}

	q1 = Q_Pow(Q_AngleAxis(32, [10, 2, 90]), 2)
	if (!cmp(Q_GetAngleDegrees(q1), 64)) {
		console.log(Q_GetAngleDegrees(q1).toFixed(5))
		assert("was expecting 64");
	}

	Q_To_M4(q1)
	Q_To_M3(q1)

	assert = function (message) {
		message = message || "assert";
		TS_AssertHelper(false, message);
	}

	// Begin auto-generated block (from unity)
	const transforms = [TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/identity*/,TS_New([-3.5300000000, 0.0000000000, 1.9700000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.5728910000, 0.5506340000, -0.5266366000, -0.3020796000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.6934600000, 1.5752810000, 0.5237579000], null) /* cube/identity/scaled only*/,TS_New([0.0000000000, 0.0000000000, -3.5600000000], [0.0703993100, 0.2731263000, -0.2054233000, -0.9371485000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved and rotated*/,TS_New([3.2000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0656140000, 0.8169286000, 1.0852310000], null) /* cube/identity/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.8443288000, 0.3767645000, -0.2953981000, 0.2406188000], [1.9219520000, 0.6692243000, 0.5676990000], null) /* cube/identity/rotated and scaled*/,TS_New([0.9700000000, 0.0000000000, 2.3200000000], [0.1005655000, 0.3704552000, -0.6826743000, -0.6217760000], [0.5052755000, 0.6263924000, 0.3305197000], null) /* cube/identity/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/identity*/,TS_New([-5.9500000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.4492286000, -0.3458056000, -0.8235364000, 0.0199967200], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6060892000, 2.1875130000, -0.0050160480], null) /* cube/moved only/scaled only*/,TS_New([2.6400000000, 0.0000000000, 3.8000000000], [-0.6808406000, -0.5353063000, 0.4901317000, 0.0983575300], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved and rotated*/,TS_New([0.0000000000, 0.0000000000, -3.7100000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.8076754000, 1.6734430000, 0.5051985000], null) /* cube/moved only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0920481800, -0.2323105000, 0.1682183000, -0.9535521000], [1.4280690000, 1.0000000000, 1.8320970000], null) /* cube/moved only/rotated and scaled*/,TS_New([-2.7000000000, 0.0000000000, -2.4900000000], [-0.5543670000, -0.4357000000, 0.6544338000, 0.2730553000], [0.8023842000, 0.4623566000, 1.6989600000], null) /* cube/moved only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/identity*/,TS_New([-3.2700000000, 1.3500000000, -1.3600000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.4908611000, 0.6131082000, 0.5997283000, -0.1532309000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.5467857000, 0.5596446000, 1.2090910000], null) /* cube/rotated only/scaled only*/,TS_New([-1.9300000000, 0.7999998000, -0.7999997000], [0.0704825800, -0.4677330000, -0.8656071000, 0.1642634000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved and rotated*/,TS_New([-2.9600000000, 0.8400000000, 1.4900000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.5136362000, 0.4684403000, 1.6329350000], null) /* cube/rotated only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.1685396000, 0.4345835000, 0.8632753000, 0.1936167000], [0.7219384000, 0.5772040000, 0.2723226000], null) /* cube/rotated only/rotated and scaled*/,TS_New([-1.5200000000, 1.1300000000, -4.1800000000], [0.1369485000, -0.2883210000, -0.5954689000, 0.7372469000], [0.2971745000, 1.4961420000, 1.5333990000], null) /* cube/rotated only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/scaled only/identity*/,TS_New([0.0000000000, 0.0000000000, -20.5600000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/scaled only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.7280867000, 0.1604118000, 0.4555975000, 0.4864040000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/scaled only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6421428000, 0.5413929000, 1.2156160000], null) /* cube/scaled only/scaled only*/,TS_New([0.0000000000, -1.8240000000, 0.0000000000], [-0.3454493000, -0.6978903000, -0.5519747000, -0.2982246000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/scaled only/moved and rotated*/,TS_New([0.0000000000, 1.9110000000, 6.3200000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.4765280000, 0.5740456000, 0.3318411000], null) /* cube/scaled only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.2133330000, 0.3390451000, 0.5271282000, 0.7494487000], [0.6225358000, 0.6235267000, 0.7551484000], null) /* cube/scaled only/rotated and scaled*/,TS_New([1.2790000000, -0.4029999000, 6.7300000000], [-0.2334034000, -0.4757851000, 0.0883950400, 0.8434084000], [0.3732746000, 0.6765810000, 0.5046533000], null) /* cube/scaled only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/identity*/,TS_New([-8.5700000000, -4.7600000000, -0.8600000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0520690500, -0.3504751000, 0.3730916000, 0.8574723000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8298980000, 1.3533060000, 1.6940730000], null) /* cube/moved and rotated/scaled only*/,TS_New([-1.2999990000, 2.7900000000, -6.6300010000], [-0.2719643000, -0.1091655000, 0.7467347000, -0.5970809000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/moved and rotated*/,TS_New([1.9100000000, -1.9800000000, -5.1900000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.1015220000, 1.5158290000, 1.3839880000], null) /* cube/moved and rotated/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.3705695000, -0.5961071000, 0.7031853000, 0.1134242000], [1.6352350000, 1.7661400000, 1.7984890000], null) /* cube/moved and rotated/rotated and scaled*/,TS_New([8.8999870000, 2.1000110000, 1.4600510000], [0.6120349000, 0.0778758500, -0.7458718000, -0.2510458000], [0.8958915000, 1.2686970000, 0.8643145000], null) /* cube/moved and rotated/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and scaled/identity*/,TS_New([0.0000000000, -2.3900000000, -2.4900000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and scaled/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.7925248000, -0.3877281000, -0.3391914000, -0.3263752000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and scaled/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6026363000, 2.0244350000, 0.5143761000], null) /* cube/moved and scaled/scaled only*/,TS_New([1.0399990000, 2.4600010000, 0.0000003696], [0.3594434000, -0.6335194000, 0.4142251000, 0.5457759000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and scaled/moved and rotated*/,TS_New([0.0000001316, -1.4600000000, -5.8900000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.5599880000, 2.2471450000, 1.9384390000], null) /* cube/moved and scaled/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.4751297000, -0.6280106000, 0.5162500000, 0.3366608000], [0.4465221000, 0.5567887000, 0.6920019000], null) /* cube/moved and scaled/rotated and scaled*/,TS_New([-0.8399999000, 2.0100000000, -2.9000000000], [0.6497692000, 0.6138019000, 0.2157427000, 0.3930678000], [0.5858842000, 0.6697389000, 0.7219821000], null) /* cube/moved and scaled/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated and scaled/identity*/,TS_New([-0.3310000000, 26.7000000000, 4.6300000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated and scaled/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.1792783000, -0.8172711000, -0.3942049000, 0.3801708000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated and scaled/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.5474650000, 1.2508930000, 1.2350460000], null) /* cube/rotated and scaled/scaled only*/,TS_New([-0.5910004000, -9.5499890000, -0.5339995000], [-0.7096281000, -0.4192700000, -0.4079732000, 0.3926812000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated and scaled/moved and rotated*/,TS_New([-0.0920000000, 13.9200000000, -0.0920000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.5371310000, 1.4432990000, 1.7795780000], null) /* cube/rotated and scaled/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.8674021000, -0.3492218000, -0.3265768000, 0.1378602000], [1.3455110000, 2.0456140000, 0.6165884000], null) /* cube/rotated and scaled/rotated and scaled*/,TS_New([-0.0770000000, -16.9000000000, -1.4100000000], [0.5401486000, -0.2457152000, -0.1258938000, 0.7949933000], [0.4792386000, 0.7061424000, 2.1608480000], null) /* cube/rotated and scaled/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/all/identity*/,TS_New([-0.2450000000, -3.8700000000, 0.1960000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/all/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.6208016000, -0.7224106000, 0.2200024000, 0.2105407000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/all/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.4530224000, 0.6770027000, 0.6757497000], null) /* cube/all/scaled only*/,TS_New([1.0710060000, -2.4499930000, -0.1199983000], [-0.5955710000, -0.0864631500, 0.5220602000, 0.6043777000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/all/moved and rotated*/,TS_New([-0.5450000000, -3.5800000000, -1.7390000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6163191000, 0.8347397000, 0.6309927000], null) /* cube/all/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5146037000, -0.5554304000, 0.2397356000, 0.6076241000], [0.7278147000, 0.6491644000, 0.6136065000], null) /* cube/all/rotated and scaled*/,TS_New([0.7770000000, -2.7400000000, -0.9340000000], [0.0009510925, 0.3477515000, 0.1837454000, 0.9194050000], [0.7209268000, 0.6601358000, 0.6369333000], null) /* cube/all/all*/]
	transforms[0].name = "cube";transforms[1].name = "cube/identity";transforms[2].name = "cube/moved only";transforms[3].name = "cube/rotated only";transforms[4].name = "cube/scaled only";transforms[5].name = "cube/moved and rotated";transforms[6].name = "cube/moved and scaled";transforms[7].name = "cube/rotated and scaled";transforms[8].name = "cube/all";transforms[9].name = "cube/identity/identity";transforms[10].name = "cube/identity/moved only";transforms[11].name = "cube/identity/rotated only";transforms[12].name = "cube/identity/scaled only";transforms[13].name = "cube/identity/moved and rotated";transforms[14].name = "cube/identity/moved and scaled";transforms[15].name = "cube/identity/rotated and scaled";transforms[16].name = "cube/identity/all";transforms[17].name = "cube/moved only/identity";transforms[18].name = "cube/moved only/moved only";transforms[19].name = "cube/moved only/rotated only";transforms[20].name = "cube/moved only/scaled only";transforms[21].name = "cube/moved only/moved and rotated";transforms[22].name = "cube/moved only/moved and scaled";transforms[23].name = "cube/moved only/rotated and scaled";transforms[24].name = "cube/moved only/all";transforms[25].name = "cube/rotated only/identity";transforms[26].name = "cube/rotated only/moved only";transforms[27].name = "cube/rotated only/rotated only";transforms[28].name = "cube/rotated only/scaled only";transforms[29].name = "cube/rotated only/moved and rotated";transforms[30].name = "cube/rotated only/moved and scaled";transforms[31].name = "cube/rotated only/rotated and scaled";transforms[32].name = "cube/rotated only/all";transforms[33].name = "cube/scaled only/identity";transforms[34].name = "cube/scaled only/moved only";transforms[35].name = "cube/scaled only/rotated only";transforms[36].name = "cube/scaled only/scaled only";transforms[37].name = "cube/scaled only/moved and rotated";transforms[38].name = "cube/scaled only/moved and scaled";transforms[39].name = "cube/scaled only/rotated and scaled";transforms[40].name = "cube/scaled only/all";transforms[41].name = "cube/moved and rotated/identity";transforms[42].name = "cube/moved and rotated/moved only";transforms[43].name = "cube/moved and rotated/rotated only";transforms[44].name = "cube/moved and rotated/scaled only";transforms[45].name = "cube/moved and rotated/moved and rotated";transforms[46].name = "cube/moved and rotated/moved and scaled";transforms[47].name = "cube/moved and rotated/rotated and scaled";transforms[48].name = "cube/moved and rotated/all";transforms[49].name = "cube/moved and scaled/identity";transforms[50].name = "cube/moved and scaled/moved only";transforms[51].name = "cube/moved and scaled/rotated only";transforms[52].name = "cube/moved and scaled/scaled only";transforms[53].name = "cube/moved and scaled/moved and rotated";transforms[54].name = "cube/moved and scaled/moved and scaled";transforms[55].name = "cube/moved and scaled/rotated and scaled";transforms[56].name = "cube/moved and scaled/all";transforms[57].name = "cube/rotated and scaled/identity";transforms[58].name = "cube/rotated and scaled/moved only";transforms[59].name = "cube/rotated and scaled/rotated only";transforms[60].name = "cube/rotated and scaled/scaled only";transforms[61].name = "cube/rotated and scaled/moved and rotated";transforms[62].name = "cube/rotated and scaled/moved and scaled";transforms[63].name = "cube/rotated and scaled/rotated and scaled";transforms[64].name = "cube/rotated and scaled/all";transforms[65].name = "cube/all/identity";transforms[66].name = "cube/all/moved only";transforms[67].name = "cube/all/rotated only";transforms[68].name = "cube/all/scaled only";transforms[69].name = "cube/all/moved and rotated";transforms[70].name = "cube/all/moved and scaled";transforms[71].name = "cube/all/rotated and scaled";transforms[72].name = "cube/all/all";
	const parentChain = [[],[0],[0],[0],[0],[0],[0],[0],[0],[0,1],[0,1],[0,1],[0,1],[0,1],[0,1],[0,1],[0,1],[0,2],[0,2],[0,2],[0,2],[0,2],[0,2],[0,2],[0,2],[0,3],[0,3],[0,3],[0,3],[0,3],[0,3],[0,3],[0,3],[0,4],[0,4],[0,4],[0,4],[0,4],[0,4],[0,4],[0,4],[0,5],[0,5],[0,5],[0,5],[0,5],[0,5],[0,5],[0,5],[0,6],[0,6],[0,6],[0,6],[0,6],[0,6],[0,6],[0,6],[0,7],[0,7],[0,7],[0,7],[0,7],[0,7],[0,7],[0,7],[0,8],[0,8],[0,8],[0,8],[0,8],[0,8],[0,8],[0,8]]
	const expected_world_space = [TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/identity*/,TS_New([-3.5300000000, 0.0000000000, 1.9700000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.5728910000, 0.5506340000, -0.5266366000, -0.3020796000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.6934600000, 1.5752810000, 0.5237579000], null) /* cube/identity/scaled only*/,TS_New([0.0000000000, 0.0000000000, -3.5600000000], [0.0703993100, 0.2731263000, -0.2054233000, -0.9371485000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved and rotated*/,TS_New([3.2000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0656140000, 0.8169286000, 1.0852310000], null) /* cube/identity/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.8443288000, 0.3767645000, -0.2953981000, 0.2406188000], [1.9219520000, 0.6692243000, 0.5676990000], null) /* cube/identity/rotated and scaled*/,TS_New([0.9700000000, 0.0000000000, 2.3200000000], [0.1005655000, 0.3704552000, -0.6826743000, -0.6217760000], [0.5052755000, 0.6263924000, 0.3305197000], null) /* cube/identity/all*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/identity*/,TS_New([-9.6700000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved only*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.4492286000, -0.3458056000, -0.8235364000, 0.0199967200], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/rotated only*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6060892000, 2.1875130000, -0.0050160480], null) /* cube/moved only/scaled only*/,TS_New([-1.0800000000, 0.0000000000, 3.8000000000], [-0.6808406000, -0.5353063000, 0.4901317000, 0.0983575300], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved and rotated*/,TS_New([-3.7200000000, 0.0000000000, -3.7100000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.8076754000, 1.6734430000, 0.5051985000], null) /* cube/moved only/moved and scaled*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0920481800, -0.2323105000, 0.1682183000, -0.9535521000], [1.4280690000, 1.0000000000, 1.8320970000], null) /* cube/moved only/rotated and scaled*/,TS_New([-6.4200000000, 0.0000000000, -2.4900000000], [-0.5543670000, -0.4357000000, 0.6544338000, 0.2730553000], [0.8023842000, 0.4623566000, 1.6989600000], null) /* cube/moved only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/identity*/,TS_New([0.0032349870, 3.7901150000, 0.0038482830], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.5606543000, 0.0570836300, -0.8156034000, -0.1311460000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.5467857000, 0.5596446000, 1.2090910000], null) /* cube/rotated only/scaled only*/,TS_New([-0.0014456800, 2.2371630000, -0.0002313982], [-0.8545522000, -0.2819632000, 0.3220921000, 0.2940986000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved and rotated*/,TS_New([0.0001524780, 2.3208950000, -2.5101290000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.5136362000, 0.4684403000, 1.6329350000], null) /* cube/rotated only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.6120667000, 0.5483956000, -0.5366018000, -0.1915597000], [0.7219384000, 0.5772040000, 0.2723226000], null) /* cube/rotated only/rotated and scaled*/,TS_New([0.0010243050, 3.2104770000, 3.2791060000], [-0.9451376000, 0.2953497000, 0.0615122300, 0.1252989000], [0.2971745000, 1.4961420000, 1.5333990000], null) /* cube/rotated only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/identity*/,TS_New([0.0000000000, 0.0000000000, -7.6200110000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.7280867000, 0.1604118000, 0.4555975000, 0.4864040000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.6827690000, 1.3384060000, 0.4505356000], null) /* cube/scaled only/scaled only*/,TS_New([0.0000000000, -4.5092080000, 0.0000000000], [-0.3454493000, -0.6978903000, -0.5519747000, -0.2982246000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/moved and rotated*/,TS_New([0.0000000000, 4.7242860000, 2.3423380000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [6.4898730000, 1.4191290000, 0.1229880000], null) /* cube/scaled only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.2133330000, 0.3390451000, 0.5271282000, 0.7494487000], [1.6313880000, 1.5414540000, 0.2798755000], null) /* cube/scaled only/rotated and scaled*/,TS_New([3.3516870000, -0.9962777000, 2.4942940000], [-0.2334034000, -0.4757851000, 0.0883950400, 0.8434084000], [0.9781858000, 1.6726120000, 0.1870362000], null) /* cube/scaled only/all*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/identity*/,TS_New([-2.8083110000, 0.4888901000, 2.7063120000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/moved only*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.2697353000, 0.3575857000, -0.3899686000, 0.8045495000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/rotated only*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.8298980000, 1.3533060000, 1.6940730000], null) /* cube/moved and rotated/scaled only*/,TS_New([-3.7241690000, 7.3096500000, -7.0807600000], [0.2400926000, -0.4729935000, 0.8066708000, 0.2606049000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/moved and rotated*/,TS_New([-8.3543380000, 3.6093630000, -7.0820440000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [2.1015220000, 1.5158290000, 1.3839880000], null) /* cube/moved and rotated/moved and scaled*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.0494796700, -0.1199582000, 0.3934992000, 0.9101210000], [1.6352350000, 1.7661400000, 1.7984890000], null) /* cube/moved and rotated/rotated and scaled*/,TS_New([-6.4937500000, -2.1080570000, -15.6598600000], [-0.2719092000, -0.3198145000, -0.6114016000, -0.6707997000], [0.8958915000, 1.2686970000, 0.8643145000], null) /* cube/moved and rotated/all*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled/identity*/,TS_New([-3.7200000000, -3.6158690000, 0.7272525000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled/moved only*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [-0.7925248000, -0.3877281000, -0.3391914000, -0.3263752000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled/rotated only*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0917860000, 3.0627990000, 0.6636789000], null) /* cube/moved and scaled/scaled only*/,TS_New([-1.8358500000, 3.7217750000, 3.9400010000], [0.3594434000, -0.6335194000, 0.4142251000, 0.5457759000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled/moved and rotated*/,TS_New([-3.7200000000, -2.2088570000, -3.6596320000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.8262050000, 3.3997420000, 2.5010900000], null) /* cube/moved and scaled/moved and scaled*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.4751297000, -0.6280106000, 0.5162500000, 0.3366608000], [0.8089569000, 0.8423744000, 0.8928625000], null) /* cube/moved and scaled/rotated and scaled*/,TS_New([-5.2418140000, 3.0409610000, 0.1982458000], [0.6497692000, 0.6138019000, 0.2157427000, 0.3930678000], [1.0614370000, 1.0132590000, 0.9315446000], null) /* cube/moved and scaled/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/identity*/,TS_New([-4.2545770000, 0.0040354400, -6.3552670000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.6500112000, 0.1978860000, 0.3293585000, 0.6556292000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [4.7507170000, 0.1876339000, 1.7167140000], null) /* cube/rotated and scaled/scaled only*/,TS_New([2.0379420000, 1.3197480000, 0.0008101858], [-0.4822828000, 0.2367661000, 0.8273818000, -0.1636595000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/moved and rotated*/,TS_New([-1.8398180000, 1.0348610000, 0.0008456915], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [4.7189920000, 0.2164949000, 2.4736140000], null) /* cube/rotated and scaled/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5175074000, -0.1118527000, -0.4705493000, 0.7058743000], [4.1307200000, 0.3068421000, 0.8570579000], null) /* cube/rotated and scaled/rotated and scaled*/,TS_New([2.7053560000, 0.0002075929, 1.7333100000], [-0.6569710000, 0.5510598000, -0.3691164000, 0.3584346000], [1.4712620000, 0.1059214000, 3.0035790000], null) /* cube/rotated and scaled/all*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all/identity*/,TS_New([2.0407160000, 4.8339250000, -2.4908580000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all/moved only*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [-0.2960489000, -0.4530875000, 0.4954791000, 0.6793876000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all/rotated only*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [0.8924541000, 0.5077520000, 1.2906820000], null) /* cube/all/scaled only*/,TS_New([2.0319690000, 6.3748430000, -4.9085490000], [-0.0584313900, 0.2534506000, 0.7830094000, 0.5650177000], [1.9700000000, 0.7500000000, 1.9100000000], null) /* cube/all/moved and rotated*/,TS_New([-1.6629160000, 5.4161670000, -2.4910760000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.2141490000, 0.6260548000, 1.2051960000], null) /* cube/all/moved and scaled*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [-0.1659589000, -0.0720034400, 0.4685318000, 0.8647261000], [1.4337950000, 0.4868733000, 1.1719880000], null) /* cube/all/rotated and scaled*/,TS_New([0.3833243000, 6.2635080000, -4.6447850000], [0.2032111000, 0.8332738000, 0.1952683000, 0.4756369000], [1.4202260000, 0.4951019000, 1.2165420000], null) /* cube/all/all*/]
	const unity_world_space = [TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.9999999000, 1.0000000000, 1.0000000000], null) /* cube/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [0.9999998000, 0.9999999000, 0.9999999000], null) /* cube/moved and rotated*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700010000, 0.7500000000, 1.9100000000], null) /* cube/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/identity*/,TS_New([-3.5300000000, 0.0000000000, 1.9700000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.5728910000, 0.5506340000, -0.5266366000, -0.3020796000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.6934600000, 1.5752810000, 0.5237579000], null) /* cube/identity/scaled only*/,TS_New([0.0000000000, 0.0000000000, -3.5600000000], [0.0703993100, 0.2731263000, -0.2054233000, -0.9371485000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/identity/moved and rotated*/,TS_New([3.2000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0656140000, 0.8169286000, 1.0852310000], null) /* cube/identity/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.8443288000, 0.3767645000, -0.2953981000, 0.2406188000], [1.9219520000, 0.6692245000, 0.5676992000], null) /* cube/identity/rotated and scaled*/,TS_New([0.9700000000, 0.0000000000, 2.3200000000], [0.1005655000, 0.3704552000, -0.6826743000, -0.6217760000], [0.5052757000, 0.6263925000, 0.3305197000], null) /* cube/identity/all*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/identity*/,TS_New([-9.6700000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved only*/,TS_New([-3.7200000000, -0.0000003855, -0.0000001192], [0.4492286000, -0.3458056000, -0.8235364000, 0.0199967200], [0.9999998000, 0.9999998000, 0.9999998000], null) /* cube/moved only/rotated only*/,TS_New([-3.7200000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.6060892000, 2.1875130000, -0.0050160480], null) /* cube/moved only/scaled only*/,TS_New([-1.0800000000, 0.0000000000, 3.8000000000], [-0.6808406000, -0.5353063000, 0.4901317000, 0.0983575300], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved only/moved and rotated*/,TS_New([-3.7200000000, 0.0000000000, -3.7100000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [0.8076754000, 1.6734430000, 0.5051985000], null) /* cube/moved only/moved and scaled*/,TS_New([-3.7200000000, -0.0000002895, 0.0000000000], [0.0920481800, -0.2323105000, 0.1682183000, -0.9535521000], [1.4280700000, 1.0000000000, 1.8320970000], null) /* cube/moved only/rotated and scaled*/,TS_New([-6.4200000000, 0.0000000000, -2.4900000000], [-0.5543670000, -0.4357000000, 0.6544338000, 0.2730553000], [0.8023843000, 0.4623566000, 1.6989600000], null) /* cube/moved only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.9999999000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/identity*/,TS_New([0.0032348630, 3.7901150000, 0.0038483140], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.9999999000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.5606543000, 0.0570836400, -0.8156034000, -0.1311460000], [0.9999999000, 0.9999999000, 1.0000000000], null) /* cube/rotated only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.5467857000, 0.5596446000, 1.2090910000], null) /* cube/rotated only/scaled only*/,TS_New([-0.0014457700, 2.2371630000, -0.0002313852], [-0.8545522000, -0.2819632000, 0.3220921000, 0.2940986000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/rotated only/moved and rotated*/,TS_New([0.0001525879, 2.3208950000, -2.5101290000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [0.5136362000, 0.4684403000, 1.6329350000], null) /* cube/rotated only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.6120667000, 0.5483956000, -0.5366019000, -0.1915597000], [0.7219386000, 0.5772042000, 0.2723227000], null) /* cube/rotated only/rotated and scaled*/,TS_New([0.0010243060, 3.2104760000, 3.2791060000], [-0.9451376000, 0.2953497000, 0.0615122200, 0.1252989000], [0.2971746000, 1.4961420000, 1.5333990000], null) /* cube/rotated only/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/identity*/,TS_New([0.0000000000, 0.0000000000, -7.6200110000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.6205530000, 2.4721540000, 0.3706231000], null) /* cube/scaled only/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.7280867000, 0.1604118000, 0.4555975000, 0.4864040000], [1.9733710000, 0.9443614000, 2.5455980000], null) /* cube/scaled only/rotated only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.6827690000, 1.3384060000, 0.4505356000], null) /* cube/scaled only/scaled only*/,TS_New([0.0000000000, -4.5092080000, 0.0000000000], [-0.3454493000, -0.6978903000, -0.5519747000, -0.2982246000], [2.5201120000, 0.4717943000, 2.4714230000], null) /* cube/scaled only/moved and rotated*/,TS_New([0.0000000000, 4.7242860000, 2.3423380000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [6.4898730000, 1.4191290000, 0.1229880000], null) /* cube/scaled only/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [0.2133330000, 0.3390451000, 0.5271282000, 0.7494487000], [1.4382590000, 0.9790634000, 1.1952510000], null) /* cube/scaled only/rotated and scaled*/,TS_New([3.3516870000, -0.9962777000, 2.4942940000], [-0.2334034000, -0.4757851000, 0.0883950400, 0.8434084000], [0.4838009000, 1.3485170000, 1.0971650000], null) /* cube/scaled only/all*/,TS_New([-3.7200000000, -0.0000003942, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [0.9999998000, 0.9999999000, 0.9999999000], null) /* cube/moved and rotated/identity*/,TS_New([-2.8083110000, 0.4888900000, 2.7063120000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [0.9999998000, 0.9999999000, 0.9999999000], null) /* cube/moved and rotated/moved only*/,TS_New([-3.7200000000, -0.0000003943, -7.0800000000], [0.2697353000, 0.3575857000, -0.3899686000, 0.8045495000], [0.9999999000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/rotated only*/,TS_New([-3.7200000000, -0.0000003798, -7.0800000000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [1.8298980000, 1.3533060000, 1.6940730000], null) /* cube/moved and rotated/scaled only*/,TS_New([-3.7241680000, 7.3096500000, -7.0807600000], [0.2400927000, -0.4729935000, 0.8066708000, 0.2606048000], [1.0000000000, 1.0000000000, 1.0000000000], null) /* cube/moved and rotated/moved and rotated*/,TS_New([-8.3543380000, 3.6093630000, -7.0820440000], [0.1926605000, 0.7095356000, -0.5214033000, 0.4331048000], [2.1015220000, 1.5158290000, 1.3839880000], null) /* cube/moved and rotated/moved and scaled*/,TS_New([-3.7200000000, -0.0000003035, -7.0800000000], [0.0494796700, -0.1199583000, 0.3934992000, 0.9101210000], [1.6352350000, 1.7661400000, 1.7984890000], null) /* cube/moved and rotated/rotated and scaled*/,TS_New([-6.4937490000, -2.1080570000, -15.6598600000], [-0.2719092000, -0.3198146000, -0.6114015000, -0.6707998000], [0.8958917000, 1.2686970000, 0.8643144000], null) /* cube/moved and rotated/all*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116840000, 1.5129160000, 1.2902600000], null) /* cube/moved and scaled/identity*/,TS_New([-3.7200000000, -3.6158690000, 0.7272525000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.8116800000, 1.5129200000, 1.2902600000], null) /* cube/moved and scaled/moved only*/,TS_New([-3.7200000000, -0.0000002410, 3.9400000000], [-0.7925248000, -0.3877281000, -0.3391914000, -0.3263752000], [1.5606680000, 1.4235180000, 1.6306760000], null) /* cube/moved and scaled/rotated only*/,TS_New([-3.7200000000, 0.0000000000, 3.9400000000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [1.0917860000, 3.0627990000, 0.6636789000], null) /* cube/moved and scaled/scaled only*/,TS_New([-1.8358500000, 3.7217750000, 3.9400010000], [0.3594434000, -0.6335194000, 0.4142251000, 0.5457759000], [1.3013530000, 1.7551070000, 1.5584030000], null) /* cube/moved and scaled/moved and rotated*/,TS_New([-3.7200000000, -2.2088570000, -3.6596320000], [0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000], [2.8262050000, 3.3997420000, 2.5010900000], null) /* cube/moved and scaled/moved and scaled*/,TS_New([-3.7200000000, 0.0000002585, 3.9400000000], [0.4751297000, -0.6280106000, 0.5162500000, 0.3366608000], [0.6064162000, 0.9773548000, 1.0389930000], null) /* cube/moved and scaled/rotated and scaled*/,TS_New([-5.2418140000, 3.0409610000, 0.1982458000], [0.6497692000, 0.6138019000, 0.2157427000, 0.3930678000], [0.8851812000, 1.0024710000, 1.1603730000], null) /* cube/moved and scaled/all*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/identity*/,TS_New([-4.2545780000, 0.0040349960, -6.3552670000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [3.0700000000, 0.1500000000, 1.3900000000], null) /* cube/rotated and scaled/moved only*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.6500112000, 0.1978860000, 0.3293585000, 0.6556292000], [1.6568180000, 0.9058189000, 2.0473640000], null) /* cube/rotated and scaled/rotated only*/,TS_New([-0.0000000048, -0.0000000131, 0.0000000000], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [4.7507170000, 0.1876339000, 1.7167140000], null) /* cube/rotated and scaled/scaled only*/,TS_New([2.0379420000, 1.3197480000, 0.0008101463], [-0.4822828000, 0.2367661000, 0.8273818000, -0.1636595000], [1.4637380000, 2.6545790000, 0.4916821000], null) /* cube/rotated and scaled/moved and rotated*/,TS_New([-1.8398180000, 1.0348610000, 0.0008456856], [-0.5558229000, 0.8082479000, -0.1120940000, -0.1588431000], [4.7189910000, 0.2164949000, 2.4736140000], null) /* cube/rotated and scaled/moved and scaled*/,TS_New([0.0000000000, 0.0000000000, 0.0000000000], [-0.5175074000, -0.1118527000, -0.4705492000, 0.7058743000], [1.7282970000, 2.4497340000, 1.3120730000], null) /* cube/rotated and scaled/rotated and scaled*/,TS_New([2.7053560000, 0.0002076626, 1.7333100000], [-0.6569710000, 0.5510598000, -0.3691164000, 0.3584346000], [1.1156600000, 0.8569526000, 2.3087550000], null) /* cube/rotated and scaled/all*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700010000, 0.7500000000, 1.9100000000], null) /* cube/all/identity*/,TS_New([2.0407160000, 4.8339250000, -2.4908580000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.9700010000, 0.7500000000, 1.9100010000], null) /* cube/all/moved only*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [-0.2960489000, -0.4530875000, 0.4954790000, 0.6793876000], [0.7752203000, 1.9284780000, 1.9263040000], null) /* cube/all/rotated only*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [0.8924543000, 0.5077519000, 1.2906820000], null) /* cube/all/scaled only*/,TS_New([2.0319690000, 6.3748430000, -4.9085490000], [-0.0584313800, 0.2534506000, 0.7830094000, 0.5650177000], [1.2966010000, 1.8515950000, 1.4818050000], null) /* cube/all/moved and rotated*/,TS_New([-1.6629160000, 5.4161670000, -2.4910760000], [0.1011756000, 0.6378661000, 0.0222602000, 0.7631481000], [1.2141490000, 0.6260548000, 1.2051960000], null) /* cube/all/moved and scaled*/,TS_New([2.0400000000, 7.8000000000, -2.4900000000], [-0.1659589000, -0.0720034500, 0.4685318000, 0.8647261000], [0.7644940000, 1.1478400000, 1.1115020000], null) /* cube/all/rotated and scaled*/,TS_New([0.3833243000, 6.2635080000, -4.6447850000], [0.2032111000, 0.8332738000, 0.1952683000, 0.4756369000], [1.3017590000, 0.5995319000, 1.2204480000], null) /* cube/all/all*/]
	const unity_differences = ["cube/rotated and scaled/all","cube/scaled only/moved and rotated","cube/all/rotated and scaled","cube/scaled only/rotated only","cube/moved and scaled/moved and rotated","cube/rotated and scaled/rotated only","cube/rotated and scaled/rotated and scaled","cube/all/rotated only","cube/all/all","cube/scaled only/rotated and scaled","cube/moved and scaled/all","cube/moved and scaled/rotated and scaled","cube/rotated and scaled/moved and rotated","cube/scaled only/all","cube/all/moved and rotated","cube/moved and scaled/rotated only"]
	// End auto-generated block (from unity)
	// Begin auto-generated block (from unreal)
	const ue4_world_space = [TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/identity*/ ,TS_New([-3.7200000286, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/rotated only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [2.6205499172, 2.4721500874, .3706200123], null)/* cube/scaled only*/ ,TS_New([-3.7200000286, .0000000000, -7.0799999237], [.1926596612, .7095402479, -.5214015245, .4330996573], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved and rotated*/ ,TS_New([-3.7200000286, .0000000000, 3.9400000572], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.8116799593, 1.5129200220, 1.2902599573], null)/* cube/moved and scaled*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [3.0699999332, .1500000060, 1.3899999857], null)/* cube/rotated and scaled*/ ,TS_New([2.0399999619, 7.8000001907, -2.4900000095], [.1011735350, .6378790140, .0222518891, .7631377578], [1.9700000286, .7500000000, 1.9099999666], null)/* cube/all*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/identity/identity*/ ,TS_New([-3.5299999714, .0000000000, 1.9700000286], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/identity/moved only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5728905797, -.5506297350, .5266404748, .3020813167], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/identity/rotated only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.6934599876, 1.5752799511, .5237600207], null)/* cube/identity/scaled only*/ ,TS_New([.0000000000, .0000000000, -3.5599999428], [-.0704000071, -.2731306553, .2054201365, .9371479154], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/identity/moved and rotated*/ ,TS_New([3.2000000477, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0656100512, .8169299960, 1.0852299929], null)/* cube/identity/moved and scaled*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.8443295956, .3767602146, -.2953998148, .2406201810], [1.9219499826, .6692199707, .5677000284], null)/* cube/identity/rotated and scaled*/ ,TS_New([.9700000286, .0000000000, 2.3199999332], [-.1005695090, -.3704607487, .6826692224, .6217774749], [.5052800179, .6263899803, .3305200040], null)/* cube/identity/all*/ ,TS_New([-3.7200000286, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved only/identity*/ ,TS_New([-9.6700000763, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved only/moved only*/ ,TS_New([-3.7200000286, .0000000000, .0000000000], [.4492304325, -.3458127081, -.8235325217, .0199914277], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved only/rotated only*/ ,TS_New([-3.7200000286, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [.6060900092, 2.1875100136, -.0050200000], null)/* cube/moved only/scaled only*/ ,TS_New([-1.0799999237, .0000000000, 3.7999999523], [-.6808388233, -.5353102684, .4901296198, .0983583778], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved only/moved and rotated*/ ,TS_New([-3.7200000286, .0000000000, -3.7100000381], [.0000000000, .0000000000, .0000000000, 1.0000000000], [.8076800108, 1.6734399796, .5052000284], null)/* cube/moved only/moved and scaled*/ ,TS_New([-3.7200000286, .0000000000, .0000000000], [-.0920501798, .2323094755, -.1682197154, .9535518885], [1.4280699492, 1.0000000000, 1.8321000338], null)/* cube/moved only/rotated and scaled*/ ,TS_New([-6.4200000763, .0000000000, -2.4900000095], [-.5543697476, -.4357003570, .6544297338, .2730589509], [.8023800254, .4623599946, 1.6989599466], null)/* cube/moved only/all*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/rotated only/identity*/ ,TS_New([.0032546520, 3.7901146412, .0038866997], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/rotated only/moved only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.5606558323, .0570845045, -.8156009912, -.1311535239], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/rotated only/rotated only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [.5467900038, .5596399903, 1.2090899944], null)/* cube/rotated only/scaled only*/ ,TS_New([-.0014340878, 2.2371625900, -.0002083778], [-.8545510769, -.2819673121, .3220901787, .2940999269], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/rotated only/moved and rotated*/ ,TS_New([.0001702309, 2.3209207058, -2.5101051331], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [.5136399865, .4684399962, 1.6329400539], null)/* cube/rotated only/moved and scaled*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.6120678782, .5483985543, -.5365965962, -.1915615946], [.7219399810, .5771999955, .2723200023], null)/* cube/rotated only/rotated and scaled*/ ,TS_New([.0010333657, 3.2104425430, 3.2791371346], [-.9451363683, .2953505516, .0615117103, .1253051013], [.2971700132, 1.4961400032, 1.5334000587], null)/* cube/rotated only/all*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [2.6205499172, 2.4721500874, .3706200123], null)/* cube/scaled only/identity*/ ,TS_New([.0000000000, .0000000000, -7.6199474335], [.0000000000, .0000000000, .0000000000, 1.0000000000], [2.6205499172, 2.4721500874, .3706200123], null)/* cube/scaled only/moved only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.7280896902, .1604110450, .4556002021, .4863971770], [2.6205499172, 2.4721500874, .3706200123], null)/* cube/scaled only/rotated only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.6827598810, 1.3383973837, .4505331218], null)/* cube/scaled only/scaled only*/ ,TS_New([.0000000000, -4.5092015266, .0000000000], [.3454525769, .6978895068, .5519738197, .2982239127], [2.6205499172, 2.4721500874, .3706200123], null)/* cube/scaled only/moved and rotated*/ ,TS_New([.0000000000, 4.7242789268, 2.3423185349], [.0000000000, .0000000000, .0000000000, 1.0000000000], [6.4898705482, 1.4191378355, .1229865476], null)/* cube/scaled only/moved and scaled*/ ,TS_New([.0000000000, .0000000000, .0000000000], [.2133294940, .3390513062, .5271294713, .7494459748], [1.6313971281, 1.5414596796, .2798736989], null)/* cube/scaled only/rotated and scaled*/ ,TS_New([3.3516831398, -.9962764978, 2.4942727089], [-.2333992571, -.4757923186, .0883987397, .8434051275], [.9781726599, 1.6726073027, .1870333850], null)/* cube/scaled only/all*/ ,TS_New([-3.7200000286, .0000000000, -7.0799999237], [.1926596612, .7095402479, -.5214015245, .4330996573], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved and rotated/identity*/ ,TS_New([-2.8081977367, .4888048172, 2.7063035965], [.1926596612, .7095402479, -.5214015245, .4330996573], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved and rotated/moved only*/ ,TS_New([-3.7200000286, .0000000000, -7.0799999237], [.2697330713, .3575890958, -.3899703622, .8045477867], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved and rotated/rotated only*/ ,TS_New([-3.7200000286, .0000000000, -7.0799999237], [.1926596612, .7095402479, -.5214015245, .4330996573], [1.8299000263, 1.3533099890, 1.6940699816], null)/* cube/moved and rotated/scaled only*/ ,TS_New([-3.7241609097, 7.3096499443, -7.0806956291], [-.2400940508, .4730053544, -.8066636324, -.2606042922], [1.0000000000, 1.0000000000, 1.0000000000], null)/* cube/moved and rotated/moved and rotated*/ ,TS_New([-8.3543338776, 3.6093683243, -7.0819597244], [.1926596612, .7095402479, -.5214015245, .4330996573], [2.1015200615, 1.5158300400, 1.3839900494], null)/* cube/moved and rotated/moved and scaled*/ ,TS_New([-3.7200000286, .0000000000, -7.0799999237], [.0494815707, -.1199644208, .3935010433, .9101191759], [1.6352399588, 1.7661399841, 1.7984900475], null)/* cube/moved and rotated/rotated and scaled*/ ,TS_New([-6.4938554764, -2.1079807281, -15.6598453522], [.2719210982, .3198233247, .6113883257, .6708027124], [.8958899975, 1.2687000036, .8643100262], null)/* cube/moved and rotated/all*/ ,TS_New([-3.7200000286, .0000000000, 3.9400000572], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.8116799593, 1.5129200220, 1.2902599573], null)/* cube/moved and scaled/identity*/ ,TS_New([-3.7200000286, -3.6158790588, .7272524834], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.8116799593, 1.5129200220, 1.2902599573], null)/* cube/moved and scaled/moved only*/ ,TS_New([-3.7200000286, .0000000000, 3.9400000572], [.7925215364, .3877290785, .3391902149, .3263826966], [1.8116799593, 1.5129200220, 1.2902599573], null)/* cube/moved and scaled/rotated only*/ ,TS_New([-3.7200000286, .0000000000, 3.9400000572], [.0000000000, .0000000000, .0000000000, 1.0000000000], [1.0917907953, 3.0628159046, .6636838913], null)/* cube/moved and scaled/scaled only*/ ,TS_New([-1.8358529806, 3.7217836380, 3.9400000572], [-.3594361842, .6335136294, -.4142064750, -.5458011031], [1.8116799593, 1.5129200220, 1.2902599573], null)/* cube/moved and scaled/moved and rotated*/ ,TS_New([-3.7200000286, -2.2088632584, -3.6596307755], [.0000000000, .0000000000, .0000000000, 1.0000000000], [2.8262026310, 3.3997581005, 2.5010914803], null)/* cube/moved and scaled/moved and scaled*/ ,TS_New([-3.7200000286, .0000000000, 3.9400000572], [-.4751305878, .6280102134, -.5162509084, -.3366585970], [.8089513183, .8423787355, .8928598762], null)/* cube/moved and scaled/rotated and scaled*/ ,TS_New([-5.2418112755, 3.0409691334, .1982457638], [.6497703791, .6137997508, .2157402337, .3930704892], [1.0614269972, 1.0132631063, .9315418601], null)/* cube/moved and scaled/all*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [3.0699999332, .1500000060, 1.3899999857], null)/* cube/rotated and scaled/identity*/ ,TS_New([-4.2545628548, .0041239262, -6.3552737236], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [3.0699999332, .1500000060, 1.3899999857], null)/* cube/rotated and scaled/moved only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.6500074267, .1978860795, .3293533921, .6556354165], [3.0699999332, .1500000060, 1.3899999857], null)/* cube/rotated and scaled/rotated only*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [4.7507328987, .1876335144, 1.7167193890], null)/* cube/rotated and scaled/scaled only*/ ,TS_New([2.0379481316, 1.3197357655, .0008294582], [-.4822798371, .2367652059, .8273846507, -.1636554152], [3.0699999332, .1500000060, 1.3899999857], null)/* cube/rotated and scaled/moved and rotated*/ ,TS_New([-1.8398125172, 1.0348716974, .0008520484], [-.5558214188, .8082501292, -.1120900661, -.1588396430], [4.7189888954, .2164950073, 2.4736161232], null)/* cube/rotated and scaled/moved and scaled*/ ,TS_New([.0000000000, .0000000000, .0000000000], [-.5175066590, -.1118504703, -.4705528915, .7058727741], [4.1307158470, .3068414927, .8570601344], null)/* cube/rotated and scaled/rotated and scaled*/ ,TS_New([2.7053513527, .0001749992, 1.7333149910], [-.6569640636, .5510640740, -.3691142797, .3584425151], [1.4712667465, .1059210002, 3.0035815239], null)/* cube/rotated and scaled/all*/ ,TS_New([2.0399999619, 7.8000001907, -2.4900000095], [.1011735350, .6378790140, .0222518891, .7631377578], [1.9700000286, .7500000000, 1.9099999666], null)/* cube/all/identity*/ ,TS_New([2.0406951904, 4.8339252472, -2.4908220768], [.1011735350, .6378790140, .0222518891, .7631377578], [1.9700000286, .7500000000, 1.9099999666], null)/* cube/all/moved only*/ ,TS_New([2.0399999619, 7.8000001907, -2.4900000095], [-.2960475981, -.4530707896, .4954839051, .6793956757], [1.9700000286, .7500000000, 1.9099999666], null)/* cube/all/rotated only*/ ,TS_New([2.0399999619, 7.8000001907, -2.4900000095], [.1011735350, .6378790140, .0222518891, .7631377578], [.8924494386, .5077499747, 1.2906825542], null)/* cube/all/scaled only*/ ,TS_New([2.0318748951, 6.3748178482, -4.9085402489], [-.0584198944, .2534683049, .7830065489, .5650147796], [1.9700000286, .7500000000, 1.9099999666], null)/* cube/all/moved and rotated*/ ,TS_New([-1.6629326344, 5.4161939621, -2.4909183979], [.1011735350, .6378790140, .0222518891, .7631377578], [1.2141504288, .6260550022, 1.2051908970], null)/* cube/all/moved and scaled*/ ,TS_New([2.0399999619, 7.8000001907, -2.4900000095], [-.1659515649, -.0719838962, .4685362577, .8647266626], [1.4337857962, .4868700206, 1.1719951630], null)/* cube/all/rotated and scaled*/ ,TS_New([.3832387924, 6.2634935379, -4.6447105408], [.2032161951, .8332816958, .1952632666, .4756229818], [1.4202320576, .4951049685, 1.2165362835], null)/* cube/all/all*/ ]
	// End auto-generated block (from unreal)

	TS_AssertHelper(transforms.length == unity_world_space.length);
	TS_AssertHelper(transforms.length == ue4_world_space.length);
	TS_AssertHelper(transforms.length == expected_world_space.length);
	TS_AssertHelper(transforms.length == parentChain.length);

	for (var i = 0; i < transforms.length; ++i) {
		const chain = parentChain[i];
		var worldTransform = TS_Copy(transforms[i]);
		for (var j = chain.length - 1; j >= 0; --j) {
			worldTransform = TS_Combine(worldTransform, transforms[chain[j]]);
		}
		
		const ue4Transform = ue4_world_space[i];
		const expected = expected_world_space[i];

		const equals_expected = TS_Equals(worldTransform, expected);
		if (!equals_expected) {
			console.log(transforms[i].name);
		}
		TS_AssertHelper(equals_expected);

		const equals_ue4 = TS_Same(worldTransform, ue4Transform, 0.001);
		if (!equals_ue4) {
			const debug = TS_GetWorldSpaceTransform(transforms[i]);
			console.log(transforms[i].name);
		}
		TS_AssertHelper(equals_ue4);
	}

	TS_AssertHelper(true, "no");
	//TS_AssertHelper(false, "yes");
	//TS_AssertHelper(null, "no");
	//TS_AssertHelper(0, "no");
	
	var ts1 = TS_New([0,0,1], [0,0,0,1], [1,1,1]);
	var ts2 = TS_New([0,0,0], Q_AngleAxis(90, [1, 0, 0]), [1,1,1]);
	var ts3 = TS_Copy(ts1);
	var ts4 = TS_New([0,0,0], Q_AngleAxis(-90, [1, 0, 0]), [1,1,1]);
	var ts5 = TS_New([0,0,0], [0,0,0,1], [5, 4, 3]);

	if (TS_Same(ts1, ts2) || TS_Equals(ts1, ts2)) {
		assert();
	}

	if (TS_Same(ts4, ts2) || TS_Equals(ts4, ts2)) {
		assert();
	}

	if (!TS_Same(ts1, ts3)) {
		assert();
	}

	if (!TS_Equals(ts1, ts3)) {
		assert();
	}

	if (!V3_Equals(TS_GetPosition(ts1), [0,0,1])) {
		assert();
	}

	if (!Q_Equals(Q_AngleAxis(90, [1, 0, 0]), TS_GetRotation(ts2))) {
		assert();
	}

	if (!V3_Equals(TS_GetScale(ts5), [5,4,3])) {
		assert();
	}

	TS_SetPosition(ts3, [4, 5, 6]);
	TS_SetRotation(ts3, Q_AngleAxis(35, [6, 7, 8]));
	TS_SetScale(ts3, [5, 4, 3]);

	if (!V3_Equals(TS_GetPosition(ts3), [4, 5, 6])) {
		assert();
	}

	if (!Q_Equals(Q_AngleAxis(35, [6, 7, 8]), TS_GetRotation(ts3))) {
		assert();
	}

	if (!V3_Equals(TS_GetScale(ts3), [5,4,3])) {
		assert();
	}

	if (!V3_Equals(TS_TransformPoint(TS_Combine(ts1, ts2), [0,0,0]) , [0,-1,0])) {
		assert();
	}

	if (!V3_Equals(TS_UnTransformPoint(TS_Combine(ts1, ts2), [0,-1,0]) , [0,0,0])) {
		assert();
	}

	if (!V3_Equals(TS_UnTransformPoint(ts2, [0,-1,0]) , [0,0,1])) {
		assert();
	}

	if (!V3_Equals(TS_UnTransformPoint(ts1, [0,-1,0]) , [0,-1,-1])) {
		assert();
	}


	ts1 = TS_New([0,0,0], Q_AngleAxis(90, [1, 0, 0]), [1,1,1]);
	ts2 = TS_New([0,0,0], Q_AngleAxis(90, [0, 1, 0]), [1,1,1]);
	ts3 = TS_Combine(ts1, ts2); // ts1 first
	ts4 = TS_Combine(ts2, ts1); // ts2 first

	var q1 = Q_AngleAxis(90, [1, 0, 0]);
	var q2 = Q_AngleAxis(90, [0, 1, 0]);
	var q3 = Q_Mul(q1, q2);
	var q4 = Q_Mul(q2, q1);

	if (!V3_Equals(TS_TransformPoint(ts3, [0,0,1]), Q_Rotate(q3, [0,0,1]))) {
		assert();
	} 
	if (!V3_Equals(TS_TransformPoint(ts4, [0,0,1]), Q_Rotate(q4, [0,0,1]))) {
		assert();
	} 

	//console.log("ts3: " + V3_To_Str(TS_TransformPoint(ts3, [0,0,1])));
	//console.log("ts4: " + V3_To_Str(TS_TransformPoint(ts4, [0,0,1])));

	if (!V3_Equals(TS_TransformPoint(TS_GetInverse(ts3), TS_TransformPoint(ts3, [0,0,1])), [0,0,1])) {
		assert();
	}

	//console.log(V3_To_Str(TS_TransformPoint(ts3, [0,0,1])));

	if (!V3_Equals(TS_TransformPoint(TS_GetInverse(ts3), [0,0,1]), [-1,0,0])) {
		console.log(V3_To_Str(TS_TransformPoint(ts3, [0,0,1])));
		console.log(V3_To_Str(TS_TransformPoint(TS_GetInverse(ts3), [0,0,1])));
		assert();
	}

	/*console.log("ts3:");
	console.log(V3_To_Str(TS_TransformPoint(ts3, [0,0,1])));
	console.log(TS_To_String(ts3));

	console.log("inverse ts3:");
	console.log(V3_To_Str(TS_TransformPoint(TS_GetInverse(ts3), [0,0,1])));
	console.log(TS_To_String(TS_GetInverse(ts3)));
	
	console.log("inversion logic:")
	console.log(TS_To_String(TS_Combine(TS_GetInverse(ts2), TS_GetInverse(ts1))))*/

	if (!TS_Equals(
		TS_GetInverse(TS_Combine(ts1, ts2)), 
		TS_Combine(TS_GetInverse(ts2), TS_GetInverse(ts1)))) {
		assert();
	}

	q1 = TS_TransformRotation(TS_New(V3_Zero(), Q_AngleAxis(90, [0,1,0])), Q_AngleAxis(90, [1, 0, 0]))
	if (!V3_Equals(V3_Mul_Q([0,0,1], q1), [0, -1, 0])) {
		assert();
	}
	q2 = TS_UnTransformRotation(TS_New(V3_Zero(), Q_AngleAxis(90, [0,1,0])), Q_AngleAxis(90, [1, 0, 0]))
	if (!V3_Equals(V3_Mul_Q([0,0,1], q2), [0, -1, 0])) { 
		console.log(V3_Mul_Q([0,0,1], q2));
		assert();
	}

	if (!V3_Equals(
		V3_Mul_Q([0,0,1], q1), 
		TS_TransformOrientation(TS_New(V3_Zero(), q1), [0,0,1]))
		) {
		assert();
	}


	if (!V3_Equals(	V3_Mul_Q([0,0,1], q2), 
					TS_UnTransformOrientation(
						TS_New(V3_Zero(), Q_AngleAxis(90, [0,1,0])),
						Q_Rotate(Q_AngleAxis(90, [1, 0, 0]), [0,0,1])
					)
				  )) { 
		assert();
	}

	var m4 = TS_ToMatrix4(TS_New(V3_Zero(), Q_AngleAxis(90, [1, 0, 0])));
	var expected = [
		1.0000000,  0.0000000,  0.0000000, 0,
		0.0000000,  0.0000000, 1.0000000, 0,
		0.0000000,  -1.0000000,  0.0000000, 0,
		0,          0,          0,         1
	]

	if (m4.length != expected.length) {
		assert();
	}

	for (var i = 0; i < expected.length; ++i) {
		if (!cmp(m4[i], expected[i])) {
			assert();
		}
	}

	var m3 = TS_ToMatrix3(TS_New(V3_Zero(), Q_AngleAxis(90, [1, 0, 0])));
	expected = [
		1.0000000,  0.0000000,  0.0000000, 
		0.0000000,  0.0000000, 1.0000000, 
		0.0000000,  -1.0000000,  0.0000000
	]

	if (m3.length != expected.length) {
		assert();
	}

	for (var i = 0; i < expected.length; ++i) {
		if (!cmp(m3[i], expected[i])) {
			assert();
		}
	}

	assert = function (message) {
		message = message || "assert";
		N_AssertHelper(false, message);
	}

	//assert("break");

	N_AssertIsNode(N_New());
	//N_AssertIsTransform(V3_Right());
	N_AssertIsTransform(ts1);
	N_AssertIsString("test")
	//N_AssertIsString(false)
	//N_AssertIsString(null)
	//N_AssertIsString(0.7)
	//N_AssertIsString(V3_Zero());
	N_AssertIsBool(true)
	N_AssertIsBool(false)
	//N_AssertIsBool(7)
	//N_AssertIsBool(0)
	//N_AssertIsBool(null)
	//N_AssertIsVector3(true);
	N_AssertIsVector3([0,5,6]);
	//N_AssertIsQuaternion(7);
	N_AssertIsQuaternion(Q_AngleAxis(90, [0,0,1]));
}

/*
function N_New(optionalName, optionalTransform) {
function N_GetWorldTransform(node) {
function N_GetWorldMatrix(node) {
function N_GetWorldPosition(node) {
function N_GetWorldRotation(node) {
function N_GetWorldScale(node) {
function N_GetLocalPosition(node) {
function N_GetLocalRotation(node) {
function N_GetLocalScale(node) {
function N_MarkWorldTransformDirty(node) {
function N_SetWorldSRT(node, scale, rotation, translation) {
function N_SetWorldPosition(node, position) {
function N_SetWorldRotation(node, rotation) {
function N_SetWorldScale(node, scale) {
function N_SetLocalPosition(node, position) {
function N_SetLocalRotation(node, rotation) {
function N_SetLocalScale(node, scale) {
function N_TransformPoint(node, point) {
function N_UnTransformPoint(node, point) { 
function N_TransformOrientation(node, orientation) {
function N_UnTransformOrientation(node, orientation) { 
function N_TransformRotation(node, rotation) {
function N_UnTransformRotation(node, rotation) {
function N_SetParent(node, parent) { // Maintain global position by default
function N_AddChildIgnoringGlobalPosition(parent, child) {
function N_AddChildMaintainingGlobalPosition(parent, child) {
function N_AddChild(child, parent) { // Maintain global position by default
function N_SetParentIgnoringGlobalPosition(node, parent) {
function N_SetParentMaintainingGlobalPosition(node, parent) {
*/
		</script>
	</head>
	<body onload="main();console.log('done')">

	</body>
</html>
